{"ast":null,"code":"import _classCallCheck from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import Cookies from'universal-cookie';import add from'./img/add.png';import'./TaskAdd.sass';var cookies=new Cookies();var TaskAdd=/*#__PURE__*/function(_Component){_inherits(TaskAdd,_Component);var _super=_createSuper(TaskAdd);function TaskAdd(){var _this;_classCallCheck(this,TaskAdd);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.getDate=function(){var time=new Date();var date=time.getFullYear()+'-';if(time.getMonth()<10)date+='0';date+=time.getMonth()+1;date+='-';if(time.getDate()<10)date+='0';date+=time.getDate();return date;};_this.state={title:'',date:_this.getDate(),priority:1};_this.updateDatabase=function(props){var tasks=props;var response=fetch('/updatetask',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tasks:tasks,user:cookies.get('user')})});};_this.handleTitleChange=function(e){_this.setState({title:e.target.value});document.querySelector('.addErr').innerHTML='';};_this.handleDateChange=function(e){_this.setState({date:e.target.value});document.querySelector('.addErr').innerHTML='';};_this.handlePriorityChange=function(props){document.querySelector('.priorityCircleGrey').style.backgroundColor='rgba(0,0,0,0)';document.querySelector('.priorityCircleBlue').style.backgroundColor='rgba(0,0,0,0)';document.querySelector('.priorityCircleRed').style.backgroundColor='rgba(0,0,0,0)';if(props===1)document.querySelector('.priorityCircleGrey').style.backgroundColor='#8D8D8D';else if(props===2)document.querySelector('.priorityCircleBlue').style.backgroundColor='#fca503';else if(props===3)document.querySelector('.priorityCircleRed').style.backgroundColor='#FF5E5A';_this.setState({priority:props});};_this.handleSubmit=function(){var data={title:_this.state.title,date:_this.state.date,priority:_this.state.priority,done:false};var txt=document.querySelector('.addErr');txt.innerHTML='';if(data.title<3)txt.innerHTML='Title must have at least 3 letters!';else{var t1=new Date().getTime();var t2=new Date(data.date).getTime();var t3=t2-t1+86400000;if(t3<0)txt.innerHTML='Date cannot be from the past!';else{var tasks=cookies.get('tasks')||[];var taskExist=false;tasks.map(function(task){if(task.title===data.title){txt.innerHTML='Task with such title already exists!';taskExist=true;}});if(taskExist===false){tasks.push(data);cookies.set('tasks',tasks);_this.updateDatabase(tasks);_this.setState({name:'',date:_this.getDate()});txt.innerHTML='';window.location.reload();}}}};_this.addTaskMobileForm=function(){var x=window.matchMedia('(max-width: 1023px)');if(x.matches){if(document.querySelector('.newTaskForm').style.display==='block')document.querySelector('.newTaskForm').style.display='none';else document.querySelector('.newTaskForm').style.display='block';}};_this.welcome=function(){if(cookies.get('login'))return'Hey '+cookies.get('login')+'!';else return'Hey!';};return _this;}_createClass(TaskAdd,[{key:\"componentDidMount\",value:function componentDidMount(){this.handlePriorityChange(this.state.priority);if(!cookies.get('start'))cookies.set('start',true);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"taskAddPanel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"userHeader\"},this.welcome()),/*#__PURE__*/React.createElement(\"span\",{className:\"newTaskHeader\",onClick:this.addTaskMobileForm},\"Add new task\"),/*#__PURE__*/React.createElement(\"div\",{className:\"newTaskForm\"},/*#__PURE__*/React.createElement(\"input\",{value:this.state.title,onChange:this.handleTitleChange,placeholder:\"title\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{value:this.state.date,onChange:this.handleDateChange,placeholder:\"date\",type:\"date\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"priorityChoose\"},/*#__PURE__*/React.createElement(\"span\",null,\"Priority:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityChoose__option\",onClick:this.handlePriorityChange.bind(this,1)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleGrey\"}),\"Low\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityChoose__option\",onClick:this.handlePriorityChange.bind(this,2)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleBlue\"}),\"Medium\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityChoose__option\",onClick:this.handlePriorityChange.bind(this,3)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleRed\"}),\"High\")),/*#__PURE__*/React.createElement(\"img\",{className:\"addTask\",onClick:this.handleSubmit,src:add,alt:\"add\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"addErr\"}))));}}]);return TaskAdd;}(Component);export default TaskAdd;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/TaskAdd.jsx"],"names":["React","Component","Fragment","Cookies","add","cookies","TaskAdd","getDate","time","Date","date","getFullYear","getMonth","state","title","priority","updateDatabase","props","tasks","response","fetch","method","headers","body","JSON","stringify","user","get","handleTitleChange","e","setState","target","value","document","querySelector","innerHTML","handleDateChange","handlePriorityChange","style","backgroundColor","handleSubmit","data","done","txt","t1","getTime","t2","t3","taskExist","map","task","push","set","name","window","location","reload","addTaskMobileForm","x","matchMedia","matches","display","welcome","bind"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react'\nimport Cookies from 'universal-cookie'\nimport add from './img/add.png'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nclass TaskAdd extends Component {\n\n    getDate = () => {\n        const time = new Date()\n        let date = time.getFullYear() + '-'\n        if (time.getMonth() < 10) date += '0'\n        date += time.getMonth() +1\n        date += '-'\n        if (time.getDate() < 10) date += '0'\n        date += time.getDate()\n        return date\n    }\n\n    state = {\n        title: '',\n        date: this.getDate(),\n        priority: 1\n    }\n\n    updateDatabase = props => {\n        const tasks = props\n        const response = fetch('/updatetask', {\n          method: 'POST',\n          headers: {\n          'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({tasks: tasks, user: cookies.get('user')}),\n        })\n      }\n\n    handleTitleChange = e => {\n        this.setState({\n            title: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handleDateChange = e => {\n        this.setState({\n            date: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handlePriorityChange = props => {\n        document.querySelector('.priorityCircleGrey').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleBlue').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleRed').style.backgroundColor = 'rgba(0,0,0,0)'\n        if (props === 1) document.querySelector('.priorityCircleGrey').style.backgroundColor = '#8D8D8D'\n        else if (props === 2) document.querySelector('.priorityCircleBlue').style.backgroundColor = '#fca503'\n        else if (props === 3) document.querySelector('.priorityCircleRed').style.backgroundColor = '#FF5E5A'\n\n        this.setState({\n            priority: props\n        })\n    }\n\n    handleSubmit = () => {\n        const data = {\n            title: this.state.title, \n            date: this.state.date, \n            priority: this.state.priority,\n            done: false\n        }\n\n        const txt = document.querySelector('.addErr')\n        txt.innerHTML = ''\n        if (data.title < 3) txt.innerHTML = 'Title must have at least 3 letters!'\n\n        else {\n            const t1 = new Date().getTime()\n            const t2 = new Date(data.date).getTime()\n            const t3 = t2-t1 + 86400000\n            if (t3 < 0) txt.innerHTML = 'Date cannot be from the past!'\n\n            else {\n                let tasks = cookies.get('tasks') || []\n                let taskExist = false\n                tasks.map(task => {\n                    if (task.title === data.title) {\n                        txt.innerHTML = 'Task with such title already exists!'\n                        taskExist = true\n                        }   \n                    })\n                    if (taskExist === false) {\n                        tasks.push(data)\n                        cookies.set('tasks', tasks)\n                        this.updateDatabase(tasks)\n                        this.setState({\n                            name: '',\n                            date: this.getDate(),\n                        })\n                        txt.innerHTML = ''\n                        window.location.reload()\n                    }\n            }\n        }\n    }\n\n    addTaskMobileForm = () => {\n        const x = window.matchMedia('(max-width: 1023px)')\n        if (x.matches) {\n            if (document.querySelector('.newTaskForm').style.display === 'block')\n            document.querySelector('.newTaskForm').style.display = 'none'\n            else document.querySelector('.newTaskForm').style.display = 'block'\n        }\n    }\n\n    componentDidMount() {\n        this.handlePriorityChange(this.state.priority)\n        if (!(cookies.get('start'))) cookies.set('start', true)\n    }\n\n    welcome = () => {\n        if (cookies.get('login')) return 'Hey ' + cookies.get('login') + '!'\n        else return 'Hey!'\n    }\n    \n    render () {\n    return (\n        <Fragment>\n            <div className='taskAddPanel'>\n                <div className='userHeader'>{this.welcome()}</div>\n                <span className='newTaskHeader' onClick={this.addTaskMobileForm}>Add new task</span>\n                <div className='newTaskForm'>\n                    <input value={this.state.title} onChange={this.handleTitleChange} placeholder='title' type='text' />\n                    <input value={this.state.date} onChange={this.handleDateChange} placeholder='date' type='date' />\n                    <div className='priorityChoose'>\n                    <span>Priority:</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 1)}><span className='priorityCircleGrey'></span>Low</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 2)}><span className='priorityCircleBlue'></span>Medium</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 3)}><span className='priorityCircleRed'></span>High</span>\n                    </div>\n                    <img className='addTask' onClick={this.handleSubmit} src={add} alt='add'/>\n                    <span className='addErr'></span>\n                </div>\n            </div>\n        </Fragment>\n    )}\n}\n\nexport default TaskAdd"]},"metadata":{},"sourceType":"module"}