{"ast":null,"code":"import _slicedToArray from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import Cookies from'universal-cookie';import'./TaskAdd.sass';var cookies=new Cookies();var handleRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,login,pass,confPass){var errField,response,answer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:errField=document.querySelector('.regErr');if(!(email.length<6)){_context.next=5;break;}errField.innerText='Too short email!';_context.next=29;break;case 5:if(!(login.length<3)){_context.next=9;break;}errField.innerText='Too short login!';_context.next=29;break;case 9:if(!(pass!==confPass)){_context.next=13;break;}errField.innerText='Passwords are not the same!';_context.next=29;break;case 13:if(email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)){_context.next=17;break;}errField.innerText='Incorrect email!';_context.next=29;break;case 17:if(pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)){_context.next=21;break;}errField.innerText='Incorrect password!';_context.next=29;break;case 21:errField.innetText='';_context.next=24;return fetch('/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,login:login,pass:pass})});case 24:response=_context.sent;_context.next=27;return response.text();case 27:answer=_context.sent;errField.innerText=answer;case 29:case\"end\":return _context.stop();}}},_callee);}));return function handleRegister(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();var Register=function Register(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),login=_useState4[0],setLogin=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),pass=_useState6[0],setPass=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confPass=_useState8[0],setConfPass=_useState8[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"register\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Join us!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"Take control over your tasks.\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:login,onChange:function onChange(e){return setLogin(e.target.value);},placeholder:\"login\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:pass,onChange:function onChange(e){return setPass(e.target.value);},placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:confPass,onChange:function onChange(e){return setConfPass(e.target.value);},placeholder:\"confirm password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:function onClick(){return handleRegister(email,login,pass,confPass);}},\"Register\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\",onClick:function onClick(){return props.setTaskScreen();}},/*#__PURE__*/React.createElement(\"strong\",null,\"Back to ToDo\")),/*#__PURE__*/React.createElement(\"span\",{className:\"regErr\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"login-dot\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"register-hint\"},\"Password must have at least:\",/*#__PURE__*/React.createElement(\"br\",null),\"- 1 letter\",/*#__PURE__*/React.createElement(\"br\",null),\"- 1 number\",/*#__PURE__*/React.createElement(\"br\",null),\"- 6 signs\",/*#__PURE__*/React.createElement(\"br\",null)));};export default Register;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/Register.jsx"],"names":["React","useState","Cookies","cookies","handleRegister","email","login","pass","confPass","errField","document","querySelector","length","innerText","match","innetText","fetch","method","headers","body","JSON","stringify","response","text","answer","Register","props","setEmail","setLogin","setPass","setConfPass","e","target","value","setTaskScreen"],"mappings":"2cAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,MAAO,gBAAP,CAEA,GAAMC,CAAAA,OAAO,CAAG,GAAID,CAAAA,OAAJ,EAAhB,CAEA,GAAME,CAAAA,cAAc,0FAAG,iBAAOC,KAAP,CAAcC,KAAd,CAAqBC,IAArB,CAA2BC,QAA3B,+IACfC,QADe,CACJC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CADI,MAGjBN,KAAK,CAACO,MAAN,CAAe,CAHE,0BAGCH,QAAQ,CAACI,SAAT,CAAqB,kBAArB,CAHD,mCAKZP,KAAK,CAACM,MAAN,CAAe,CALH,0BAKMH,QAAQ,CAACI,SAAT,CAAqB,kBAArB,CALN,mCAOZN,IAAI,GAAKC,QAPG,2BAOOC,QAAQ,CAACI,SAAT,CAAqB,6BAArB,CAPP,kCASXR,KAAK,CAACS,KAAN,CAAY,sCAAZ,CATW,0BAS0CL,QAAQ,CAACI,SAAT,CAAqB,kBAArB,CAT1C,kCAWXN,IAAI,CAACO,KAAL,CAAW,wCAAX,CAXW,0BAW2CL,QAAQ,CAACI,SAAT,CAAqB,qBAArB,CAX3C,+BAcjBJ,QAAQ,CAACM,SAAT,CAAqB,EAArB,CAdiB,uBAeMC,CAAAA,KAAK,CAAC,WAAD,CAAc,CACtCC,MAAM,CAAE,MAD8B,CAEtCC,OAAO,CAAE,CACT,eAAgB,kBADP,CAF6B,CAKtCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEhB,KAAK,CAALA,KAAF,CAASC,KAAK,CAALA,KAAT,CAAgBC,IAAI,CAAJA,IAAhB,CAAf,CALgC,CAAd,CAfX,SAeXe,QAfW,sCAsBIA,CAAAA,QAAQ,CAACC,IAAT,EAtBJ,SAsBXC,MAtBW,eAuBjBf,QAAQ,CAACI,SAAT,CAAqBW,MAArB,CAvBiB,uDAAH,kBAAdpB,CAAAA,cAAc,wDAApB,CA2BA,GAAMqB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,KAAK,CAAI,eACEzB,QAAQ,CAAC,EAAD,CADV,wCACjBI,KADiB,eACVsB,QADU,8BAEE1B,QAAQ,CAAC,EAAD,CAFV,yCAEjBK,KAFiB,eAEVsB,QAFU,8BAGA3B,QAAQ,CAAC,EAAD,CAHR,yCAGjBM,IAHiB,eAGXsB,OAHW,8BAIQ5B,QAAQ,CAAC,EAAD,CAJhB,yCAIjBO,QAJiB,eAIPsB,WAJO,eAMxB,mBACE,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,SAAS,CAAC,aAAhB,aADF,cAEE,4BAAM,SAAS,CAAC,gBAAhB,kCAFF,cAGE,6BAAO,SAAS,CAAC,aAAjB,CAA+B,KAAK,CAAEzB,KAAtC,CAA6C,QAAQ,CAAE,kBAAA0B,CAAC,QAAIJ,CAAAA,QAAQ,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,EAAxD,CAAsF,WAAW,CAAC,OAAlG,CAA0G,IAAI,CAAC,MAA/G,EAHF,cAIE,6BAAO,SAAS,CAAC,aAAjB,CAA+B,KAAK,CAAE3B,KAAtC,CAA6C,QAAQ,CAAE,kBAAAyB,CAAC,QAAIH,CAAAA,QAAQ,CAACG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,EAAxD,CAAsF,WAAW,CAAC,OAAlG,CAA0G,IAAI,CAAC,MAA/G,EAJF,cAKE,6BAAO,SAAS,CAAC,aAAjB,CAA+B,KAAK,CAAE1B,IAAtC,CAA4C,QAAQ,CAAE,kBAAAwB,CAAC,QAAIF,CAAAA,OAAO,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAAvD,CAAoF,WAAW,CAAC,UAAhG,CAA2G,IAAI,CAAC,UAAhH,EALF,cAME,6BAAO,SAAS,CAAC,aAAjB,CAA+B,KAAK,CAAEzB,QAAtC,CAAgD,QAAQ,CAAE,kBAAAuB,CAAC,QAAID,CAAAA,WAAW,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAA3D,CAA4F,WAAW,CAAC,kBAAxG,CAA2H,IAAI,CAAC,UAAhI,EANF,cAOE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAG,yBAAM7B,CAAAA,cAAc,CAACC,KAAD,CAAQC,KAAR,CAAeC,IAAf,CAAqBC,QAArB,CAApB,EAA3C,aAPF,cAQE,4BAAM,SAAS,CAAC,cAAhB,CAA+B,OAAO,CAAG,yBAAMkB,CAAAA,KAAK,CAACQ,aAAN,EAAN,EAAzC,eAAsE,iDAAtE,CARF,cASE,4BAAM,SAAS,CAAC,QAAhB,EATF,cAUE,4BAAM,SAAS,CAAC,WAAhB,EAVF,cAWE,4BAAM,SAAS,CAAC,eAAhB,8CACgC,8BADhC,2BAEc,8BAFd,2BAGc,8BAHd,0BAIa,8BAJb,CAXF,CADF,CAoBD,CA1BD,CA4BA,cAAeT,CAAAA,QAAf","sourcesContent":["import React, { useState } from 'react'\nimport Cookies from 'universal-cookie'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nconst handleRegister = async (email, login, pass, confPass) => {\n  const errField = document.querySelector('.regErr')\n\n  if (email.length < 6) errField.innerText = 'Too short email!'\n\n  else if (login.length < 3) errField.innerText = 'Too short login!'\n\n  else if (pass !== confPass) errField.innerText = 'Passwords are not the same!'\n\n  else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) errField.innerText = 'Incorrect email!'\n\n  else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) errField.innerText = 'Incorrect password!'\n\n  else {\n      errField.innetText = ''\n      const response = await fetch('/register', {\n          method: 'POST',\n          headers: {\n          'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email, login, pass }),\n      })\n      const answer = await response.text();\n      errField.innerText = answer\n  }\n}   \n\nconst Register = props => {\n  const [email, setEmail] = useState('')\n  const [login, setLogin] = useState('')\n  const [pass, setPass] = useState('')\n  const [confPass, setConfPass] = useState('')\n\n  return (\n    <div className='register'>\n      <span className='login-title'>Join us!</span>\n      <span className='login-subtitle'>Take control over your tasks.</span>\n      <input className='login-input' value={email} onChange={e => setEmail(e.target.value)} placeholder='email' type='text' />\n      <input className='login-input' value={login} onChange={e => setLogin(e.target.value)} placeholder='login' type='text' />\n      <input className='login-input' value={pass} onChange={e => setPass(e.target.value)} placeholder='password' type='password' />\n      <input className='login-input' value={confPass} onChange={e => setConfPass(e.target.value)} placeholder='confirm password' type='password' />\n      <button className='login-button' onClick={ () => handleRegister(email, login, pass, confPass)}>Register</button>\n      <span className='login-create' onClick={ () => props.setTaskScreen()}><strong>Back to ToDo</strong></span>\n      <span className='regErr'></span>\n      <span className='login-dot'></span>\n      <span className='register-hint'>\n          Password must have at least:<br/>\n          - 1 letter<br/>\n          - 1 number<br/>\n          - 6 signs<br/>\n      </span>\n    </div>\n  )\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}