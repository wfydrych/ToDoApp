{"ast":null,"code":"var _jsxFileName = \"/Users/wojtek/Downloads/todo/client/src/components/TaskAdd.jsx\";\nimport React, { Component, Fragment } from 'react';\nimport Cookies from 'universal-cookie';\nimport add from './img/add.png';\nimport './TaskAdd.sass';\nimport Login from './Login';\nimport LoginFirst from './LoginFirst';\nimport LoginBar from './LoginBar';\nimport Register from './Register';\nimport StartMobile from './StartMobile';\nimport ForgotPass from './ForgotPass';\nconst cookies = new Cookies();\n\nclass TaskAdd extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getDate = () => {\n      const time = new Date();\n      let date = time.getFullYear() + '-';\n      if (time.getMonth() < 10) date += '0';\n      date += time.getMonth() + 1;\n      date += '-';\n      if (time.getDate() < 10) date += '0';\n      date += time.getDate();\n      return date;\n    };\n\n    this.state = {\n      title: '',\n      date: this.getDate(),\n      priority: 1\n    };\n\n    this.updateDatabase = props => {\n      const tasks = props;\n      const response = fetch('/updatetask', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          tasks: tasks,\n          user: cookies.get('user')\n        })\n      });\n    };\n\n    this.handleLoginBtn = () => {\n      if (cookies.get('login')) {\n        cookies.remove('login');\n        cookies.remove('tasks');\n        cookies.remove('user');\n        cookies.remove('start');\n        window.location.reload();\n      } else if (document.querySelector('.login').style.display === 'block') {\n        document.querySelector('.login').style.display = 'none';\n        document.querySelector('.register').style.display = 'none';\n        document.querySelector('.login-first').style.display = 'none';\n        document.querySelector('.startpage-mobile').style.display = 'none';\n        document.querySelector('.forgot-pass').style.display = 'none';\n      } else {\n        document.querySelector('.login').style.display = 'block';\n        document.querySelector('.register').style.display = 'none';\n        document.querySelector('.login-first').style.display = 'none';\n        document.querySelector('.startpage-mobile').style.display = 'none';\n        document.querySelector('.forgot-pass').style.display = 'none';\n      }\n    };\n\n    this.handleRegisterBtn = () => {\n      document.querySelector('.login').style.display = 'none';\n      document.querySelector('.register').style.display = 'block';\n      document.querySelector('.login-first').style.display = 'none';\n      document.querySelector('.startpage-mobile').style.display = 'none';\n      document.querySelector('.forgot-pass').style.display = 'none';\n    };\n\n    this.handleForgotBtn = () => {\n      document.querySelector('.login').style.display = 'none';\n      document.querySelector('.register').style.display = 'none';\n      document.querySelector('.login-first').style.display = 'none';\n      document.querySelector('.startpage-mobile').style.display = 'none';\n      document.querySelector('.forgot-pass').style.display = 'block';\n    };\n\n    this.handleTryBtn = () => {\n      document.querySelector('.startpage-mobile').style.display = 'none';\n    };\n\n    this.handleTitleChange = e => {\n      this.setState({\n        title: e.target.value\n      });\n      document.querySelector('.addErr').innerHTML = '';\n    };\n\n    this.handleDateChange = e => {\n      this.setState({\n        date: e.target.value\n      });\n      document.querySelector('.addErr').innerHTML = '';\n    };\n\n    this.handlePriorityChange = props => {\n      document.querySelector('.priorityCircleGrey').style.backgroundColor = 'rgba(0,0,0,0)';\n      document.querySelector('.priorityCircleBlue').style.backgroundColor = 'rgba(0,0,0,0)';\n      document.querySelector('.priorityCircleRed').style.backgroundColor = 'rgba(0,0,0,0)';\n      if (props === 1) document.querySelector('.priorityCircleGrey').style.backgroundColor = '#8D8D8D';else if (props === 2) document.querySelector('.priorityCircleBlue').style.backgroundColor = '#fca503';else if (props === 3) document.querySelector('.priorityCircleRed').style.backgroundColor = '#FF5E5A';\n      this.setState({\n        priority: props\n      });\n    };\n\n    this.handleSubmit = () => {\n      const data = {\n        title: this.state.title,\n        date: this.state.date,\n        priority: this.state.priority,\n        done: false\n      };\n      const txt = document.querySelector('.addErr');\n      txt.innerHTML = '';\n      if (data.title < 3) txt.innerHTML = 'Title must have at least 3 letters!';else {\n        const t1 = new Date().getTime();\n        const t2 = new Date(data.date).getTime();\n        const t3 = t2 - t1 + 86400000;\n        if (t3 < 0) txt.innerHTML = 'Date cannot be from the past!';else {\n          let tasks = cookies.get('tasks') || [];\n          let taskExist = false;\n          tasks.map(task => {\n            if (task.title === data.title) {\n              txt.innerHTML = 'Task with such title already exists!';\n              taskExist = true;\n            }\n          });\n\n          if (taskExist === false) {\n            tasks.push(data);\n            cookies.set('tasks', tasks);\n            this.updateDatabase(tasks);\n            this.setState({\n              name: '',\n              date: this.getDate()\n            });\n            txt.innerHTML = '';\n            window.location.reload();\n          }\n        }\n      }\n    };\n\n    this.addTaskMobileForm = () => {\n      const x = window.matchMedia('(max-width: 1023px)');\n\n      if (x.matches) {\n        if (document.querySelector('.newTaskForm').style.display === 'block') document.querySelector('.newTaskForm').style.display = 'none';else document.querySelector('.newTaskForm').style.display = 'block';\n      }\n    };\n\n    this.welcome = () => {\n      if (cookies.get('login')) return 'Hey ' + cookies.get('login') + '!';else return 'Hey!';\n    };\n  }\n\n  componentDidMount() {\n    this.handlePriorityChange(this.state.priority);\n    const x = window.matchMedia('(max-width: 1023px)');\n\n    if (x.matches) {\n      if (cookies.get('start')) document.querySelector('.startpage-mobile').style.display = 'none';else cookies.set('start', true);\n    } else if (cookies.get('start')) document.querySelector('.newTaskForm').style.display = 'block';\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(LoginBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"taskAddPanel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, this.welcome()), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"newTaskHeader\",\n      onClick: this.addTaskMobileForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"Add new task\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newTaskForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.title,\n      onChange: this.handleTitleChange,\n      placeholder: \"title\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.date,\n      onChange: this.handleDateChange,\n      placeholder: \"date\",\n      type: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"priorityChoose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }, \"Priority:\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityChoose__option\",\n      onClick: this.handlePriorityChange.bind(this, 1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityCircleGrey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 116\n      }\n    }), \"Low\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityChoose__option\",\n      onClick: this.handlePriorityChange.bind(this, 2),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityCircleBlue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 116\n      }\n    }), \"Medium\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityChoose__option\",\n      onClick: this.handlePriorityChange.bind(this, 3),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"priorityCircleRed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 116\n      }\n    }), \"High\")), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"addTask\",\n      onClick: this.handleSubmit,\n      src: add,\n      alt: \"add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"addErr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Register, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(LoginFirst, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ForgotPass, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(StartMobile, {\n      try: this.handleTryBtn,\n      login: this.handleLoginBtn,\n      register: this.handleRegisterBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nexport default TaskAdd;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/TaskAdd.jsx"],"names":["React","Component","Fragment","Cookies","add","Login","LoginFirst","LoginBar","Register","StartMobile","ForgotPass","cookies","TaskAdd","getDate","time","Date","date","getFullYear","getMonth","state","title","priority","updateDatabase","props","tasks","response","fetch","method","headers","body","JSON","stringify","user","get","handleLoginBtn","remove","window","location","reload","document","querySelector","style","display","handleRegisterBtn","handleForgotBtn","handleTryBtn","handleTitleChange","e","setState","target","value","innerHTML","handleDateChange","handlePriorityChange","backgroundColor","handleSubmit","data","done","txt","t1","getTime","t2","t3","taskExist","map","task","push","set","name","addTaskMobileForm","x","matchMedia","matches","welcome","componentDidMount","render","bind"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react'\nimport Cookies from 'universal-cookie'\nimport add from './img/add.png'\nimport './TaskAdd.sass'\nimport Login from './Login'\nimport LoginFirst from './LoginFirst'\nimport LoginBar from './LoginBar'\nimport Register from './Register'\nimport StartMobile from './StartMobile'\nimport ForgotPass from './ForgotPass'\n\nconst cookies = new Cookies()\n\nclass TaskAdd extends Component {\n\n    getDate = () => {\n        const time = new Date()\n        let date = time.getFullYear() + '-'\n        if (time.getMonth() < 10) date += '0'\n        date += time.getMonth() +1\n        date += '-'\n        if (time.getDate() < 10) date += '0'\n        date += time.getDate()\n        return date\n    }\n\n    state = {\n        title: '',\n        date: this.getDate(),\n        priority: 1\n    }\n\n    updateDatabase = props => {\n        const tasks = props\n        const response = fetch('/updatetask', {\n          method: 'POST',\n          headers: {\n          'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({tasks: tasks, user: cookies.get('user')}),\n        })\n      }\n\n    handleLoginBtn = () => {\n        if (cookies.get('login')) {\n            cookies.remove('login')\n            cookies.remove('tasks')\n            cookies.remove('user')\n            cookies.remove('start')\n            window.location.reload()\n        }\n\n        else if (document.querySelector('.login').style.display === 'block')\n        {\n            document.querySelector('.login').style.display = 'none'\n            document.querySelector('.register').style.display = 'none'\n            document.querySelector('.login-first').style.display = 'none'\n            document.querySelector('.startpage-mobile').style.display = 'none'\n            document.querySelector('.forgot-pass').style.display = 'none'\n        }\n\n        else {\n            document.querySelector('.login').style.display = 'block'\n            document.querySelector('.register').style.display = 'none'\n            document.querySelector('.login-first').style.display = 'none'\n            document.querySelector('.startpage-mobile').style.display = 'none'\n            document.querySelector('.forgot-pass').style.display = 'none'\n        }\n        \n    }\n\n    handleRegisterBtn = () => {\n        document.querySelector('.login').style.display = 'none'\n        document.querySelector('.register').style.display = 'block'\n        document.querySelector('.login-first').style.display = 'none'\n        document.querySelector('.startpage-mobile').style.display = 'none'\n        document.querySelector('.forgot-pass').style.display = 'none'\n    }\n\n    handleForgotBtn = () => {\n        document.querySelector('.login').style.display = 'none'\n        document.querySelector('.register').style.display = 'none'\n        document.querySelector('.login-first').style.display = 'none'\n        document.querySelector('.startpage-mobile').style.display = 'none'\n        document.querySelector('.forgot-pass').style.display = 'block'\n    }\n\n    handleTryBtn = () => {\n        document.querySelector('.startpage-mobile').style.display = 'none'\n    }\n\n    handleTitleChange = e => {\n        this.setState({\n            title: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handleDateChange = e => {\n        this.setState({\n            date: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handlePriorityChange = props => {\n        document.querySelector('.priorityCircleGrey').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleBlue').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleRed').style.backgroundColor = 'rgba(0,0,0,0)'\n        if (props === 1) document.querySelector('.priorityCircleGrey').style.backgroundColor = '#8D8D8D'\n        else if (props === 2) document.querySelector('.priorityCircleBlue').style.backgroundColor = '#fca503'\n        else if (props === 3) document.querySelector('.priorityCircleRed').style.backgroundColor = '#FF5E5A'\n\n        this.setState({\n            priority: props\n        })\n    }\n\n    handleSubmit = () => {\n        const data = {\n            title: this.state.title, \n            date: this.state.date, \n            priority: this.state.priority,\n            done: false\n        }\n\n        const txt = document.querySelector('.addErr')\n        txt.innerHTML = ''\n        if (data.title < 3) txt.innerHTML = 'Title must have at least 3 letters!'\n\n        else {\n            const t1 = new Date().getTime()\n            const t2 = new Date(data.date).getTime()\n            const t3 = t2-t1 + 86400000\n            if (t3 < 0) txt.innerHTML = 'Date cannot be from the past!'\n\n            else {\n                let tasks = cookies.get('tasks') || []\n                let taskExist = false\n                tasks.map(task => {\n                    if (task.title === data.title) {\n                        txt.innerHTML = 'Task with such title already exists!'\n                        taskExist = true\n                        }   \n                    })\n                    if (taskExist === false) {\n                        tasks.push(data)\n                        cookies.set('tasks', tasks)\n                        this.updateDatabase(tasks)\n                        this.setState({\n                            name: '',\n                            date: this.getDate(),\n                        })\n                        txt.innerHTML = ''\n                        window.location.reload()\n                    }\n            }\n        }\n    }\n\n    addTaskMobileForm = () => {\n        const x = window.matchMedia('(max-width: 1023px)')\n        if (x.matches) {\n            if (document.querySelector('.newTaskForm').style.display === 'block')\n            document.querySelector('.newTaskForm').style.display = 'none'\n            else document.querySelector('.newTaskForm').style.display = 'block'\n        }\n    }\n\n    componentDidMount() {\n        this.handlePriorityChange(this.state.priority)\n        const x = window.matchMedia('(max-width: 1023px)')\n        if (x.matches) {\n            if (cookies.get('start')) document.querySelector('.startpage-mobile').style.display = 'none'\n            else cookies.set('start', true)\n        }\n        else if (cookies.get('start')) document.querySelector('.newTaskForm').style.display = 'block'\n    }\n\n    welcome = () => {\n        if (cookies.get('login')) return 'Hey ' + cookies.get('login') + '!'\n        else return 'Hey!'\n    }\n    \n    render () {\n    return (\n        <Fragment>\n            <LoginBar />\n            <div className='taskAddPanel'>\n                <div className='userHeader'>{this.welcome()}</div>\n                <span className='newTaskHeader' onClick={this.addTaskMobileForm}>Add new task</span>\n                <div className='newTaskForm'>\n                    <input value={this.state.title} onChange={this.handleTitleChange} placeholder='title' type='text' />\n                    <input value={this.state.date} onChange={this.handleDateChange} placeholder='date' type='date' />\n                    <div className='priorityChoose'>\n                    <span>Priority:</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 1)}><span className='priorityCircleGrey'></span>Low</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 2)}><span className='priorityCircleBlue'></span>Medium</span>\n                        <span className='priorityChoose__option' onClick={this.handlePriorityChange.bind(this, 3)}><span className='priorityCircleRed'></span>High</span>\n                    </div>\n                    <img className='addTask' onClick={this.handleSubmit} src={add} alt='add'/>\n                    <span className='addErr'></span>\n                </div>\n                <Login />\n                <Register />\n                <LoginFirst />\n                <ForgotPass />\n            </div>\n            <StartMobile try={this.handleTryBtn} login={this.handleLoginBtn} register={this.handleRegisterBtn}/>\n        </Fragment>\n    )}\n}\n\nexport default TaskAdd"]},"metadata":{},"sourceType":"module"}