{"ast":null,"code":"var _jsxFileName = \"/Users/wojtek/Downloads/todo/client/src/components/LoginFirst.jsx\";\nimport React, { useState } from 'react';\nimport Cookies from 'universal-cookie';\nimport './TaskAdd.sass';\nconst cookies = new Cookies();\n\nconst handleLogin = async (email, pass, e) => {\n  const errField = document.querySelector('.logErr');\n  const errFField = document.querySelector('.firstLogErr');\n\n  if (email.length < 6) {\n    errField.innerText = 'Too short email!';\n    errFField.innerText = 'Too short email!';\n  } else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) {\n    errField.innerText = 'Incorrect email!';\n    errFField.innerText = 'Incorrect email!';\n  } else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) {\n    errField.innerText = 'Incorrect password';\n    errFField.innerText = 'Incorrect password';\n  } else {\n    errField.innerText = '';\n    errFField.innerText = '';\n\n    try {\n      const response = await fetch('/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          pass\n        })\n      });\n      let answer = await response.text();\n      answer = JSON.parse(answer);\n\n      if (answer.tasks) {\n        errField.innerText = answer.info;\n        cookies.set('login', answer.login);\n        cookies.set('user', answer.user);\n        cookies.set('tasks', answer.tasks);\n        window.location.reload(false);\n      } else {\n        errField.innerText = answer.info;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n};\n\nconst LoginFirst = () => {\n  const [email, setEmail] = useState('');\n  const [pass, setPass] = useState('');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"login-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Nice to meet you!\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"login-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"We are glad to have a new user :)\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"login-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 42\n    }\n  }, \"Log in\"), \" and create your first task\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: \"email\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    value: pass,\n    onChange: e => setPass(e.target.value),\n    placeholder: \"password\",\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-button\",\n    onClick: () => handleLogin(email, pass),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"logErr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"login-dot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default LoginFirst;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/LoginFirst.jsx"],"names":["React","useState","Cookies","cookies","handleLogin","email","pass","e","errField","document","querySelector","errFField","length","innerText","match","response","fetch","method","headers","body","JSON","stringify","answer","text","parse","tasks","info","set","login","user","window","location","reload","error","console","log","LoginFirst","setEmail","setPass","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Cookies from 'universal-cookie'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nconst handleLogin = async (email, pass, e) => {\n  const errField = document.querySelector('.logErr')\n  const errFField = document.querySelector('.firstLogErr')\n\n  if (email.length < 6) {\n      errField.innerText = 'Too short email!'\n      errFField.innerText = 'Too short email!'\n  }\n\n  else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) {\n      errField.innerText = 'Incorrect email!'\n      errFField.innerText = 'Incorrect email!'\n  }\n\n  else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) {\n      errField.innerText = 'Incorrect password'\n      errFField.innerText = 'Incorrect password'\n  }\n\n  else {\n      errField.innerText = ''\n      errFField.innerText = ''\n\n      try {\n          const response = await fetch('/login', {\n              method: 'POST',\n              headers: {\n              'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({ email, pass }),\n          })\n          let answer = await response.text()\n          answer = JSON.parse(answer)\n\n          if (answer.tasks) {\n              errField.innerText = answer.info\n              cookies.set('login', answer.login)\n              cookies.set('user', answer.user)\n\n              cookies.set('tasks', answer.tasks)\n              window.location.reload(false)\n\n          } else {\n              errField.innerText = answer.info\n          }\n        } catch (error) {\n          console.log(error);\n        }\n  }\n}\n\nconst LoginFirst = () => {\n  const [email, setEmail] = useState('')\n  const [pass, setPass] = useState('')\n\n  return (\n      <div className='login-first'>\n        <span className='login-title'>Nice to meet you!</span>\n        <span className='login-subtitle'>We are glad to have a new user :)</span>\n        <span className='login-subtitle'><strong>Log in</strong> and create your first task</span>\n        <input className='login-input' value={email} onChange={e => setEmail(e.target.value)} placeholder='email' type='text' />\n        <input className='login-input' value={pass} onChange={e => setPass(e.target.value)} placeholder='password' type='password' />\n        <button className='login-button' onClick={ () => handleLogin(email, pass)}>Login</button>\n        <span className='logErr'></span>\n        <span className='login-dot'></span>\n      </div>\n  )\n}\n\nexport default LoginFirst"]},"metadata":{},"sourceType":"module"}