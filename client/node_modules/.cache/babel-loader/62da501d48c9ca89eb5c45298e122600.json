{"ast":null,"code":"import _slicedToArray from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import Cookies from'universal-cookie';import'./TaskAdd.sass';var cookies=new Cookies();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,pass){var errField,response,answer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:errField=document.querySelector('.logErr');if(!(email.length<6)){_context.next=5;break;}errField.innerText='Too short email!';_context.next=28;break;case 5:if(email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)){_context.next=9;break;}errField.innerText='Incorrect email!';_context.next=28;break;case 9:if(pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)){_context.next=13;break;}errField.innerText='Incorrect password';_context.next=28;break;case 13:errField.innerText='';_context.prev=14;_context.next=17;return fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,pass:pass})});case 17:response=_context.sent;_context.next=20;return response.text();case 20:answer=_context.sent;answer=JSON.parse(answer);if(answer.tasks){errField.innerText=answer.info;cookies.set('login',answer.login);cookies.set('user',answer.user);cookies.set('tasks',answer.tasks);window.location.reload(false);}else{errField.innerText=answer.info;}_context.next=28;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](14);console.log(_context.t0);case 28:case\"end\":return _context.stop();}}},_callee,null,[[14,25]]);}));return function handleLogin(_x,_x2){return _ref.apply(this,arguments);};}();var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPass=_useState4[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Welcome back.\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"It is really nice to see you again!\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:pass,onChange:function onChange(e){return setPass(e.target.value);},placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:function onClick(){return handleLogin(email,pass);}},\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\",onClick:function onClick(){return props.setForgotScreen();}},/*#__PURE__*/React.createElement(\"strong\",null,\"Forgot password?\"),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\"},\"Don\\u2019t have an account? \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",{onClick:function onClick(){return props.setRegisterScreen();}},\"Create Account\")),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\",onClick:function onClick(){return props.setTaskScreen();}},/*#__PURE__*/React.createElement(\"strong\",null,\"Back to ToDo\")),/*#__PURE__*/React.createElement(\"span\",{className:\"logErr\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"login-dot\"}));};export default Login;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/Login.jsx"],"names":["React","useState","Cookies","cookies","handleLogin","email","pass","errField","document","querySelector","length","innerText","match","fetch","method","headers","body","JSON","stringify","response","text","answer","parse","tasks","info","set","login","user","window","location","reload","console","log","Login","props","setEmail","setPass","e","target","value","setForgotScreen","setRegisterScreen","setTaskScreen"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Cookies from 'universal-cookie'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nconst handleLogin = async (email, pass) => {\n  const errField = document.querySelector('.logErr')\n\n  if (email.length < 6) {\n      errField.innerText = 'Too short email!'\n  }\n\n  else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) {\n      errField.innerText = 'Incorrect email!'\n  }\n\n  else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) {\n      errField.innerText = 'Incorrect password'\n  }\n\n  else {\n      errField.innerText = ''\n\n      try {\n          const response = await fetch('/login', {\n              method: 'POST',\n              headers: {\n              'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({ email, pass }),\n          })\n          let answer = await response.text()\n          answer = JSON.parse(answer)\n\n          if (answer.tasks) {\n              errField.innerText = answer.info\n              cookies.set('login', answer.login)\n              cookies.set('user', answer.user)\n\n              cookies.set('tasks', answer.tasks)\n              window.location.reload(false)\n\n          } else {\n              errField.innerText = answer.info\n          }\n        } catch (error) {\n          console.log(error);\n        }\n  }\n}\n\nconst Login = props => {\n  const [email, setEmail] = useState('')\n  const [pass, setPass] = useState('')\n\n  return (\n    <div className='login'>\n        <span className='login-title'>Welcome back.</span>\n        <span className='login-subtitle'>It is really nice to see you again!</span>\n        <input className='login-input' value={email} onChange={e => setEmail(e.target.value)} placeholder='email' type='text' />\n        <input className='login-input' value={pass} onChange={e => setPass(e.target.value)} placeholder='password' type='password' />\n        <button className='login-button' onClick={ () => handleLogin(email, pass)}>Login</button>\n        <span className='login-create' onClick={ () => props.setForgotScreen()}><strong>Forgot password?</strong><br/></span>\n        <span className='login-create'>Donâ€™t have an account? <br/><strong onClick={ () => props.setRegisterScreen()}>Create Account</strong></span>\n        <span className='login-create' onClick={ () => props.setTaskScreen()}><strong>Back to ToDo</strong></span>\n        <span className='logErr'></span>\n        <span className='login-dot'></span>\n    </div>\n  )\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}