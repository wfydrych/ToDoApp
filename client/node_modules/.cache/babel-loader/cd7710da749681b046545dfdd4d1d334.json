{"ast":null,"code":"import _slicedToArray from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import Cookies from'universal-cookie';import'./TaskAdd.sass';var cookies=new Cookies();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,pass,e){var errField,response,answer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:errField=document.querySelector('.logErr');if(!(email.length<6)){_context.next=5;break;}errField.innerText='Too short email!';_context.next=28;break;case 5:if(email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)){_context.next=9;break;}errField.innerText='Incorrect email!';_context.next=28;break;case 9:if(pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)){_context.next=13;break;}errField.innerText='Incorrect password';_context.next=28;break;case 13:errField.innerText='';_context.prev=14;_context.next=17;return fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,pass:pass})});case 17:response=_context.sent;_context.next=20;return response.text();case 20:answer=_context.sent;answer=JSON.parse(answer);if(answer.tasks){errField.innerText=answer.info;cookies.set('login',answer.login);cookies.set('user',answer.user);cookies.set('tasks',answer.tasks);window.location.reload(false);}else{errField.innerText=answer.info;}_context.next=28;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](14);console.log(_context.t0);case 28:case\"end\":return _context.stop();}}},_callee,null,[[14,25]]);}));return function handleLogin(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var LoginFirst=function LoginFirst(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPass=_useState4[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"login-first\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Nice to meet you!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"We are glad to have a new user :)\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Log in\"),\" and create your first task\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:pass,onChange:function onChange(e){return setPass(e.target.value);},placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:function onClick(){return handleLogin(email,pass);}},\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"logErr\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"login-dot\"}));};export default LoginFirst;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/LoginFirst.jsx"],"names":["React","useState","Cookies","cookies","handleLogin","email","pass","e","errField","document","querySelector","length","innerText","match","fetch","method","headers","body","JSON","stringify","response","text","answer","parse","tasks","info","set","login","user","window","location","reload","console","log","LoginFirst","setEmail","setPass","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Cookies from 'universal-cookie'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nconst handleLogin = async (email, pass, e) => {\n  const errField = document.querySelector('.logErr')\n\n  if (email.length < 6) {\n      errField.innerText = 'Too short email!'\n  }\n\n  else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) {\n      errField.innerText = 'Incorrect email!'\n  }\n\n  else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) {\n      errField.innerText = 'Incorrect password'\n  }\n\n  else {\n      errField.innerText = ''\n\n      try {\n          const response = await fetch('/login', {\n              method: 'POST',\n              headers: {\n              'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({ email, pass }),\n          })\n          let answer = await response.text()\n          answer = JSON.parse(answer)\n\n          if (answer.tasks) {\n              errField.innerText = answer.info\n              cookies.set('login', answer.login)\n              cookies.set('user', answer.user)\n\n              cookies.set('tasks', answer.tasks)\n              window.location.reload(false)\n\n          } else {\n              errField.innerText = answer.info\n          }\n        } catch (error) {\n          console.log(error);\n        }\n  }\n}\n\nconst LoginFirst = () => {\n  const [email, setEmail] = useState('')\n  const [pass, setPass] = useState('')\n\n  return (\n      <div className='login-first'>\n        <span className='login-title'>Nice to meet you!</span>\n        <span className='login-subtitle'>We are glad to have a new user :)</span>\n        <span className='login-subtitle'><strong>Log in</strong> and create your first task</span>\n        <input className='login-input' value={email} onChange={e => setEmail(e.target.value)} placeholder='email' type='text' />\n        <input className='login-input' value={pass} onChange={e => setPass(e.target.value)} placeholder='password' type='password' />\n        <button className='login-button' onClick={ () => handleLogin(email, pass)}>Login</button>\n        <span className='logErr'></span>\n        <span className='login-dot'></span>\n      </div>\n  )\n}\n\nexport default LoginFirst"]},"metadata":{},"sourceType":"module"}